---
  name: Home Assistant CI
  
  on:
    push:
    pull_request:
    schedule:
      - cron: 0 2 * * *
  
  jobs:
    # YAML Lint
    yamllint:
      name: 🧹 YAML Lint
      runs-on: ubuntu-latest
      steps:
        - name: ⤵️ Check out configuration from GitHub
          uses: actions/checkout@v3
        - name: 🚀 Run yamllint
          uses: frenck/action-yamllint@v1.4
  
    #Remark Lint
    remarklint:
      name: 🧹 Remark Lint
      runs-on: ubuntu-latest
      steps:
        - name: ⤵️ Check out configuration from GitHub
          uses: actions/checkout@v3
        - name: Running Remark lint
          uses: "docker://pipelinecomponents/remark-lint:latest"
          continue-on-error: true
          with:
            args: "remark --no-stdout --color --frail --use preset-lint-recommended ."
  
    #Home Assistant - Config check
    home-assistant:
      name: "Home Assistant Core ${{ matrix.version }} Configuration Check"
      needs: [yamllint]
      runs-on: ubuntu-latest
      strategy:
        matrix:
          version: ["stable", "beta", "dev"]
      steps:
        - name: ⤵️ Check out configuration from GitHub
          uses: actions/checkout@v3.3.0
        - name: 🚀 Run Home Assistant Configuration Check
          uses: frenck/action-home-assistant@v1.4
          with:
            path: "."
            secrets: ./secrets.fake.yaml
            version: "${{ matrix.version }}"
